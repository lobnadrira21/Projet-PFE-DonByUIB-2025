<h2 mat-dialog-title class="title">
  <mat-icon>post_add</mat-icon>
  Nouvelle publication
</h2>

<mat-dialog-content>
  <form (ngSubmit)="submitPublication()" class="form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Titre</mat-label>
      <input
        matInput
        [(ngModel)]="titre"
        name="titre"
        [maxLength]="maxTitle"
        required
        placeholder="Ex. Collecte de vêtements d’hiver"
      />
      <mat-hint align="end">{{ titre.length || 0 }}/{{ maxTitle }}</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Contenu</mat-label>
      <textarea
        matInput
        cdkTextareaAutosize
        cdkAutosizeMinRows="4"
        cdkAutosizeMaxRows="10"
        [(ngModel)]="contenu"
        name="contenu"
        [maxLength]="maxContent"
        required
        placeholder="Décrivez votre action, l’objectif, les besoins, etc."
      ></textarea>
      <mat-hint align="end">{{ contenu.length || 0 }}/{{ maxContent }}</mat-hint>
    </mat-form-field>

    <p *ngIf="errorMessage" class="error-message">
      <mat-icon>error_outline</mat-icon>
      {{ errorMessage }}
    </p>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-stroked-button color="warn" type="button" (click)="closeDialog()" [disabled]="isSubmitting">
    Annuler
  </button>
  <button mat-flat-button color="primary" type="submit" form="ngForm" (click)="submitPublication()" [disabled]="isSubmitting">
    <mat-icon>send</mat-icon>
    {{ isSubmitting ? 'Publication…' : 'Publier' }}
  </button>
</mat-dialog-actions>
